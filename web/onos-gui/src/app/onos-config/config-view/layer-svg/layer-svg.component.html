<!--
~ Copyright 2019-present Open Networking Foundation
~
~ Licensed under the Apache License, Version 2.0 (the "License");
~ you may not use this file except in compliance with the License.
~ You may obtain a copy of the License at
~
~     http://www.apache.org/licenses/LICENSE-2.0
~
~ Unless required by applicable law or agreed to in writing, software
~ distributed under the License is distributed on an "AS IS" BASIS,
~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
~ See the License for the specific language governing permissions and
~ limitations under the License.
-->

<svg:g *ngIf="visible" xmlns:svg="http://www.w3.org/2000/svg">
    <svg:desc>Layer: {{layerId}} {{description}} {{changeTime | date: 'medium'}}</svg:desc>
    <svg:g *ngFor="let node of nodelist | keyvalue; let i = index">
        <svg:g onos-container-svg
               [node]="node.value.node"
               [relpath]="node.value.relPath"
               [value]="node.value.value"
               [valueType]="node.value.valueType"
               [valueTypeOpts]="node.value.valueTypeOpts"
               [parentpath]="node.value.parentPath"
               [abspath]="node.key"
               [classes]="classes"
               (containerEditRequested)="requestEditLayer($event, node.value.value, node.value.valueType, node.value.valueTypeOpts, node.value.rwPath)"
                >
        </svg:g>
        <svg:rect id="dragbox" width="100" height="20" [attr.transform]="'translate(' + node.value.node.x + ',' + node.value.node.y + ')'"
                  onosDraggableContainer [draggableNode]="node.value.node">
            <svg:desc>Using a separate invisible target for dragging</svg:desc>
        </svg:rect>
    </svg:g>
    <svg:path *ngFor="let branch of linkList | keyvalue" stroke-width="2" stroke="#a9aba0" fill-opacity="0"
              [attr.d]="curveCalculator(branch.value.link)">
        <svg:desc>{{branch.key}}</svg:desc>
    </svg:path>
</svg:g>
